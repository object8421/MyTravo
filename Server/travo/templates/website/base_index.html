<!DOCTYPE html>
<html lang="en">
<head>
    
    <title>{% block title %}My Travo{% endblock %}</title><meta charset="utf-8">
    {% block jump %}<meta http-equiv="X-UA-Compatible" content="IE=edge">{% endblock %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    
    {% load staticfiles %}
    <link rel="shortcut icon" href="{% static 'travo/image/travo_logo.png' %}">
    <!-- Bootstrap core CSS -->
    
    <link rel="stylesheet" type="text/css" href="{% static 'travo/css/bootstrap.min.css' %}" />

    <!-- Bootstrap core CSS -->
    <!-- <link href="../../dist/css/bootstrap.min.css" rel="stylesheet"> -->

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom styles for this template -->
    <link href="{% static 'travo/css/carousel.css' %}" rel="stylesheet">
    <link href="{% static 'travo/css/bootstrap-datetimepicker.min.css' %}" rel="stylesheet" media="screen">
    <link href="{% static 'travo/css/jasny-bootstrap.min.css' %}" rel="stylesheet">
    
</head>

<body>
  {% block background %}
  <div id="web_bg" style="position:absolute; width:100%; height:100%; z-index:-1"> 
<img style="position:fixed;" src="../../static/travo/image/welcome_bg16.jpg" height="100%" width="100%" /> 
</div>
 {% endblock %}
    <div id="page-content">
        {% block navbar %}
    <div class="navbar-wrapper">
      <div class="container">

        <div class="navbar navbar-fixed-top" role="navigation">
          <div class="container">
            <div class="navbar-header">
              
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="#"><b>Travo</b></a>
            </div>
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li class="active"><a href={%url 'index' %}>首页</a></li>
                <li><a href={%url 'hot_travel' %}>热门游记</a></li>
                <li><a href="#">目的地</a></li>
                {% if 'token' in request.session %}
                <li><a href={%url 'me'%}>个人主页</a></li>
                {% endif %}
                <li><a href="#contact">客户端下载</a></li>
                <li><a href="#contact">关于</a></li>
              </ul>
              <form class="navbar-form navbar-left navbar-search" role="search">
      <div class="form-group">
        <input id="inputkeyword" type="text" class="form-control search-query" placeholder="Search" required>
      </div>
      <div class="btn-group">
      <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown">
                     搜索<span class="caret"></span>
                      </button> 
                       <ul class="dropdown-menu">
                       
                       <li type="button" id="linksearchuser"><a href="#" onClick="searchuser(); return false">搜索用户</a></li>
                       <li type="button" id="linksearchtravel"><a href="#" onClick="searchtravel(); return false;">搜索游记</a></li>


                       <!--<li><a href="#">One more separated link</a></li> -->
                     </ul>
      </div>
    </form>

            <!-- search form -->
              
       



 
             
       

              <ul class="nav navbar-nav navbar-right">
                    <!--<li><a href="#">注册</a></li>-->
                    <div class="btn-group" style="float:left;margin-top:9%;">
                    {%block user_info%}
                    
                    {% if 'token' in request.session %}
                      <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown">
                      欢迎你：{{request.session.username}}<span class="caret"></span>
                      </button> 
                       <ul class="dropdown-menu">
                       <li ><a href={%url 'detail_info'%} >个人信息</a></li>
                       <li><a href={%url 'set_account'%}>设置</a></li>
                       <li><a href={%url 'logout'%}>退出</a></li>

                     
                       <!--<li><a href="#">One more separated link</a></li> -->
                     </ul>

                    {% else %}
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">注册</button>
                    <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown">
                      登录<span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                       <li ><a href="#myModal2" data-toggle="modal">使用邮箱登录</a></li>
                       <li class="divider"></li>
                       <li class="dropdown-header">使用第三方账号登录</li>
                       <li><a href="#">新浪微博登录</a></li>
                       <li><a href="#">腾讯QQ登录</a></li>
                       <!--<li><a href="#">One more separated link</a></li> -->
                     </ul>
                     {% endif %}
                     {%endblock user_info%}
                  </div>
                  <!--
                    <li class="dropdown">
                     <a href="#" class="dropdown-toggle" data-toggle="dropdown">登录 <b class="caret"></b></a>
                     <ul class="dropdown-menu">
                       <li><a href="#">使用邮箱登录</a></li>
                       <li class="divider"></li>
                       <li class="dropdown-header">使用第三方账号登录</li>
                       <li><a href="#">新浪微博登录</a></li>
                       <li><a href="#">腾讯QQ登录</a></li>
                       <! <li><a href="#">One more separated link</a></li> 
                     </ul>
                     </li>
                   -->
                </ul>  
            </div>
          </div>
        </div>

      </div>
    </div>



                <!--  注册模态框 -->
              <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <form action="/user/register" method="post" class="form-horizontal" role="form" id="valid_form" action="valid.json">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                      <h4 class="modal-title" id="myModalLabel" style="color: #104e8b;">创建账户-开启我的旅行记录</h4>
                     </div>
                     <div class="modal-body">
                      

                          <div class="form-group control-form">
                            <label for="inputEmail" class="col-sm-2 control-label" style="color: #104e8b;">邮箱</label>
                            <div class="col-sm-5 controls">
                            <input type="email" required class="form-control input-xlarge" id="inputEmail" placeholder="Email" name = "email">
                           </div>
                          </div>
                          <div class="form-group control-form">
                            <label for="inputUsername" class="col-sm-2 control-label" style="color: #104e8b;">用户名</label>
                            <div class="col-sm-5 controls">
                            <input type="text" required class="form-control input-xlarge" id="inputUsername" placeholder="UserName" name = "nickname">
                           </div>
                          </div> 
                          <div class="form-group control-form">
                            <label for="inputPassword" class="col-sm-2 control-label" style="color: #104e8b;">密码</label>
                            <div class="col-sm-5 controls">
                            <input type="password"  required class="form-control input-xlarge" id="inputPassword" placeholder="Password" name = "password" >
                           </div>
                          </div>
                        

  



                          <div class="form-group control-form">
                            <div class="col-sm-offset-2 col-sm-10">
                              <div class="checkbox">
                                <label style="color: #104e8b;">
                                <input type="checkbox" required> 我同意Travo的服务条款
                                </label>
                              </div>
                          </div>
                        </div>
                        
                      

                    </div>
                   <div class="modal-footer form-actions">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="submit" class="btn btn-primary">注册</button>
                   </div>

                  </div><!-- /.modal-content -->
                </form>
                </div><!-- /.modal-dialog -->
              </div><!-- /.modal -->



<!-- 登录模态框 -->

              <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                      <h4 class="modal-title" id="myModalLabel" style="color: #104e8b;">登录账户－欢迎回来</h4>
                     </div>
                     <div class="modal-body">
                      
                        <form action="/user/login" method="POST" class="form-horizontal" role="form">
                          
                          <div class="form-group">
                            <label for="inputUsername" class="col-sm-2 control-label" style="color: #104e8b;" >邮箱</label>
                            <div class="col-sm-6 controls">
                            <input type="email"  required class="form-control" id="loginEmail" placeholder="Email"   data-content="邮箱不能为空" >
                           </div>
                          </div> 
                          <div class="form-group">
                            <label for="inputPassword" class="col-sm-2 control-label" style="color: #104e8b;">密码</label>
                            <div class="col-sm-6">
                            <input type="password" required class="form-control" id="loginPassword" placeholder="Password">
                           </div>
                          </div>
                          <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button id="btnlogin" type="button" class="btn btn-primary">登录</button>
                   </div>
                        </form>
                      

                    </div>
                   
                  </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
              </div><!-- /.modal -->



<!-- 提醒登录失败模态框 -->
<div class="modal fade" id="LoginFailModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                      <h4 class="modal-title" id="myModalLabel" style="color: #104e8b;">登录信息</h4>
                     </div>
                     <div class="modal-body">
                      
                        <h6 class="modal-title" id="myModalLabel" style="color: #104e8b;">登录失败</h6>
                          
                          
                          </div>
                          <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">确认</button>
                    
                   </div>
                        </form>
                      

                    </div>
                   
                  </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
              </div><!-- /.modal -->



<!-- 提醒搜索失败模态框 -->
<div class="modal fade" id="SearchFailModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                      <h4 class="modal-title" id="myModalLabel" style="color: #104e8b;">注意</h4>
                     </div>
                     <div class="modal-body">
                      
                        <h6 class="modal-title" id="myModalLabel" style="color: #104e8b;">请先输入关键字再搜索喔！</h5>
                          
                          
                          </div>
                          <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">确认</button>
                    
                   </div>
                        </form>
                      

                    </div>
                   
                  </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
              </div><!-- /.modal -->




        {% endblock %}
    </div>

    <div id="content">
        {% block content %}{% endblock %}
    </div>
<script src="http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places"></script>
<script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
  
   <script src="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script>
   <script src="../../static/travo/js/jquery.validate.js"></script>
    <script type="text/javascript" src="../../static/travo/js/jquery-validate.bootstrap-tooltip.js" charset="UTF-8"></script> 
    <script src="../../static/travo/js/docs.min.js"></script>
    <script type="text/javascript" src="../../static/travo/js/bootstrap-datetimepicker.min.js" charset="UTF-8"></script>
    <script type="text/javascript" src="../../static/travo/js/bootstrap-datetimepicker.zh-CN.js" charset="UTF-8"></script>
    <script type="text/javascript" src="../../static/travo/js/jasny-bootstrap.min.js" charset="UTF-8"></script>
    <script type="text/javascript" src="../../static/travo/js/jquery.geocomplete.min.js" charset="UTF-8"></script>
    <script type="text/javascript" src="../../static/travo/js/jquery.bootpag.min.js" charset="UTF-8"></script> 

  
    
<script>
      $(function(){
        
        var options = {
          map: ".map_canvas",
          details: ".details",
          detailsAttribute: "data-geo",
          types: ["geocode", "establishment"]
        };
        
        $("#geocomplete").geocomplete(options)
          .bind("geocode:result", function(event, result){
            $.log("Result: " + result.formatted_address);
          })
          .bind("geocode:error", function(event, status){
            $.log("ERROR: " + status);
          })
          .bind("geocode:multiple", function(event, results){
            $.log("Multiple: " + results.length + " results found");
          });
        
        $("#find").click(function(){
          $("#geocomplete").trigger("geocode");
        });
        
        $("#examples a").click(function(){
          $("#geocomplete").val($(this).text()).trigger("geocode");
          return false;
        });
        
      });
    </script>
<script type="text/javascript">
$(document).ready(function(){
  $('#insert').click(function(){
  var value = $('#fileInput').val();
  $("#cover_view").html('<img src="' + value + '" />');
  });
});  
$('#datetimepicker').datetimepicker({
  language: "zh-CN",
        weekStart: 1,
        todayBtn:  1,
    autoclose: 1,
    todayHighlight: 1,
    startView: 2,
    minView: 2,
    forceParse: 0,
    format: 'yyyy-mm-dd'
});
    $('.form_datetime').datetimepicker({
        
      language: "zh-CN",
        weekStart: 1,
        todayBtn:  1,
    autoclose: 1,
    todayHighlight: 1,
    startView: 2,
    forceParse: 0,
        showMeridian: 1
    });
  $('.form_date').datetimepicker({
        language: "zh-CN",
        weekStart: 1,
        todayBtn:  1,
    autoclose: 1,
    todayHighlight: 1,
    startView: 2,
    minView: 2,
    forceParse: 0
    });
  $('.form_time').datetimepicker({
        language: "zh-CN",
        weekStart: 1,
        todayBtn:  1,
    autoclose: 1,
    todayHighlight: 1,
    startView: 1,
    minView: 0,
    maxView: 1,
    forceParse: 0
    });
</script>


    <script type="text/javascript">
$(document).ready(function(){
  $('#btnlogin').click(function(){
    var email = $("#loginEmail").val();
    var password = $("#loginPassword").val();
    if(email == "" || password == ""){
              $('#LoginFailModal').modal('show');
              return;
    }

    $.post("/user/login",{'email':email,'password':password}, function(ret){
      if(ret == '1')
        window.location.href="/me"
      else
        $('#LoginFailModal').modal('show');
    });
  });
});
  function searchuser(){
    
    var keyword = $('#inputkeyword').val();
    if(keyword != ""){
       // $.get("/search_user/"+keyword,{},function(){
       //  });
       window.location.href="/search_user/"+keyword
    }
     
    else
      $('#SearchFailModal').modal('show');
  }
    function searchtravel(){
    
    var keyword = $('#inputkeyword').val();
    if(keyword != ""){
       // $.get("/search_user/"+keyword,{},function(){
       //  });
       window.location.href="/search_travel/"+keyword
    }
     
    else
      $('#SearchFailModal').modal('show');
  }
  /*
// 判断用户输入是否为空 
function isEmpty(ui)
{
  if(ui==null||ui==""){return true}
  else 
    return false;
}
//取得用户输入的字符串长度
function getLength(ui)
{
  var i,sum=0; 
    for(i=0;i<ui.length;i++)
   {
          if ((ui.charCodeAt(i)>=0)&&(ui.charCodeAt(i)<=255)) 
            sum++; 
           else
         sum+=2;
   }
    return sum;
}
//判断是否为邮件
 function isMail(ui)
   { 
   if(isEmpty(ui)){return true;} 
        var notValid=/(@.*@)|(\.\.)|(@\.)|(\.@)|(^\.)|(^\-)|(\-\.)|(\.\-)/; 
        var valid=/^.+\@[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}$/; 
    return (!notValid.test(ui)&&valid.test(ui));
} 
//判断输入值是否在两值之间
function isLenBetween(ui,minl,maxl)
    { 
    return (ui>=minl&&ui<=maxl);
}
//验证表单
function validate_form()
{
   if(!isMail(document.testForm.mail.value)){ 
   alert("邮箱输入有误！"); 
   document.testForm.mail.focus(); 
   return false;} 
    var len=getLength(document.testForm.leng.value);
    if(len<4||len>6){ 
   alert("该域要求输入长度范围是4至6个字符！"); 
   document.testForm.leng.focus(); 
   return false;} 
}

*/
//$('#contact-form').validation();

</script>


<!--
<script>
  // Activate Google Prettify in this page
    addEventListener('load', prettyPrint, false);

  $(document).ready(function(){

    // Add prettyprint class to pre elements
      $('pre').addClass('prettyprint linenums');

  });

</script>

-->








    {% block myscript %}
    {% endblock %}
</body>
</html>